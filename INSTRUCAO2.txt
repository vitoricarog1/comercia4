# INSTRU√á√ÉO2 - Configura√ß√µes Externas e Setup Completo
# Sistema IA Agents SaaS - Plataforma Completa

## üöÄ CONFIGURA√á√ÉO DO AMBIENTE

### Pr√©-requisitos
- Node.js 18+ 
- MySQL/MariaDB 10.4+
- XAMPP (recomendado para desenvolvimento)
- Git

### Vari√°veis de Ambiente (.env)
```
# Banco de Dados
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=
DB_NAME=ai_agents_saas_main
DB_PORT=3306

# JWT
JWT_SECRET=sua_chave_secreta_super_forte_aqui
JWT_EXPIRES_IN=7d

# Servidor
PORT=3001
NODE_ENV=development

# Provedores de IA
OPENAI_API_KEY=sk-...
ANTHROPIC_API_KEY=sk-ant-...
GOOGLE_API_KEY=AIza...
COHERE_API_KEY=...
GROQ_API_KEY=gsk_...

# Email (Nodemailer)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=seu_email@gmail.com
EMAIL_PASS=sua_senha_app

# WhatsApp (Evolution API)
WHATSAPP_API_URL=http://localhost:8080
WHATSAPP_API_KEY=sua_chave_evolution

# Pagamentos (PIX)
PIX_CERT_PATH=./certificates/
PIX_CLIENT_ID=seu_client_id
PIX_CLIENT_SECRET=seu_client_secret

# Analytics
ANALYTICS_RETENTION_DAYS=365

# Backup
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
```

## üì¶ INSTALA√á√ÉO E SETUP

### 1. Clone e Configura√ß√£o Inicial
```bash
git clone <seu-repositorio>
cd ia-att

# Frontend
npm install

# Backend
cd server
npm install
cp .env.example .env
# Edite o .env com suas configura√ß√µes
```

### 2. Configura√ß√£o do Banco de Dados
```bash
# Inicie o MySQL/MariaDB
# Execute as migra√ß√µes
cd server
node setup-database.js

# Migra√ß√£o de Analytics
mysql -u root -p ai_agents_saas_main < database/migrations/create_analytics_tables.sql
```

### 3. Cria√ß√£o do Usu√°rio Admin
```bash
node create-admin.js
# Siga as instru√ß√µes para criar o primeiro admin
```

### 4. Inicializa√ß√£o dos Servi√ßos
```bash
# Terminal 1 - Backend
cd server
npm start

# Terminal 2 - Frontend
cd ..
npm run dev
```

## üîß CONFIGURA√á√ïES EXTERNAS

### Provedores de IA

#### OpenAI
1. Acesse: https://platform.openai.com/api-keys
2. Crie uma nova API key
3. Adicione no .env: `OPENAI_API_KEY=sk-...`

#### Anthropic (Claude)
1. Acesse: https://console.anthropic.com/
2. Gere uma API key
3. Adicione no .env: `ANTHROPIC_API_KEY=sk-ant-...`

#### Google (Gemini)
1. Acesse: https://makersuite.google.com/app/apikey
2. Crie uma API key
3. Adicione no .env: `GOOGLE_API_KEY=AIza...`

#### Cohere
1. Acesse: https://dashboard.cohere.ai/api-keys
2. Gere uma API key
3. Adicione no .env: `COHERE_API_KEY=...`

#### Groq
1. Acesse: https://console.groq.com/keys
2. Crie uma API key
3. Adicione no .env: `GROQ_API_KEY=gsk_...`

### Email (Notifica√ß√µes)

#### Gmail SMTP
1. Ative a verifica√ß√£o em 2 etapas
2. Gere uma senha de app espec√≠fica
3. Configure no .env:
```
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=seu_email@gmail.com
EMAIL_PASS=senha_app_gerada
```

### WhatsApp Integration

#### Evolution API
1. Clone: https://github.com/EvolutionAPI/evolution-api
2. Configure e inicie o servi√ßo
3. Obtenha a API key
4. Configure no .env:
```
WHATSAPP_API_URL=http://localhost:8080
WHATSAPP_API_KEY=sua_chave
```

### Pagamentos PIX

#### Configura√ß√£o de Certificados
1. Obtenha certificados do seu banco/PSP
2. Coloque em `server/certificates/`
3. Configure no .env:
```
PIX_CERT_PATH=./certificates/
PIX_CLIENT_ID=seu_client_id
PIX_CLIENT_SECRET=seu_client_secret
```

## üóÑÔ∏è ESTRUTURA DO BANCO DE DADOS

### Tabelas Principais
- `users` - Usu√°rios do sistema
- `agents` - Agentes de IA configurados
- `conversations` - Conversas entre usu√°rios e agentes
- `messages` - Mensagens das conversas
- `integrations` - Integra√ß√µes externas
- `notifications` - Sistema de notifica√ß√µes
- `payments` - Controle de pagamentos
- `whatsapp_sessions` - Sess√µes do WhatsApp

### Tabelas de Analytics
- `analytics_events` - Eventos de usu√°rio
- `analytics_daily_metrics` - M√©tricas di√°rias agregadas
- `analytics_performance_metrics` - M√©tricas de performance
- `analytics_funnels` - Configura√ß√£o de funis
- `analytics_dashboards` - Dashboards personalizados
- `analytics_scheduled_reports` - Relat√≥rios agendados
- `analytics_user_segments` - Segmenta√ß√£o de usu√°rios
- `analytics_goals` - Metas e objetivos

## üîê SEGURAN√áA

### Configura√ß√µes Recomendadas
1. **JWT Secret**: Use uma chave forte de 256 bits
2. **HTTPS**: Configure SSL em produ√ß√£o
3. **Rate Limiting**: J√° implementado (100 req/15min)
4. **CORS**: Configure dom√≠nios permitidos
5. **Helmet**: Prote√ß√£o de headers HTTP
6. **Valida√ß√£o**: Sanitiza√ß√£o de inputs

### Backup Autom√°tico
- Configurado para executar diariamente √†s 2h
- Reten√ß√£o de 30 dias por padr√£o
- Backup completo do banco de dados
- Logs de auditoria inclu√≠dos

## üìä MONITORAMENTO

### Analytics Dispon√≠veis
- Eventos de usu√°rio em tempo real
- M√©tricas de performance da API
- An√°lise de funis de convers√£o
- Segmenta√ß√£o avan√ßada de usu√°rios
- Relat√≥rios automatizados (Excel/PDF)
- Dashboards interativos

### Logs e Auditoria
- Todas as a√ß√µes s√£o logadas
- Auditoria de seguran√ßa
- Monitoramento de performance
- Alertas autom√°ticos

## üöÄ DEPLOY EM PRODU√á√ÉO

### Checklist Pr√©-Deploy
- [ ] Configurar todas as vari√°veis de ambiente
- [ ] Executar migra√ß√µes do banco
- [ ] Configurar SSL/HTTPS
- [ ] Configurar dom√≠nio personalizado
- [ ] Testar todas as integra√ß√µes
- [ ] Configurar backup autom√°tico
- [ ] Configurar monitoramento

### Comandos de Build
```bash
# Frontend
npm run build

# Backend (PM2 recomendado)
npm install -g pm2
pm2 start server/app.js --name "ia-agents-api"
pm2 startup
pm2 save
```

## üìû SUPORTE

### Logs Importantes
- `server/logs/` - Logs da aplica√ß√£o
- `auditoria.txt` - Log de auditoria
- Console do navegador - Erros frontend

### Troubleshooting Comum
1. **Erro de conex√£o DB**: Verifique credenciais no .env
2. **API keys inv√°lidas**: Verifique configura√ß√£o dos provedores
3. **Erro CORS**: Configure dom√≠nios permitidos
4. **WhatsApp n√£o conecta**: Verifique Evolution API
5. **Emails n√£o enviados**: Verifique configura√ß√£o SMTP

### Contatos
- Documenta√ß√£o: README.md
- Issues: GitHub Issues
- Logs: Verifique arquivos de auditoria

---

**Sistema IA Agents SaaS v2.0**
*Plataforma completa com Analytics, Notifica√ß√µes, WhatsApp, Pagamentos e muito mais!*

√öltima atualiza√ß√£o: Janeiro 2025